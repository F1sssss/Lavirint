<div class="mt-4"></div>
<div class="container">
  @if (loader) {
    <div class="card">
      <div class="card-body gap-3">
        <div>
          <div class="spinner-border spinner-border-sm me-1"></div>
          Učitavanje u toku
        </div>
      </div>
    </div>
  } @else {
    <div class="d-flex align-items-end justify-content-between">
      <div>
        <nav>
          <ol class="breadcrumb mb-1 text-muted">
            <li class="breadcrumb-item breadcrumb-item-action" [routerLink]="['/', 'customer-list-view']">Klijenti</li>
            <li class="breadcrumb-item">{{ customer.name }}</li>
            <li class="breadcrumb-item">Sertifikati</li>
          </ol>
        </nav>
        <h1 class="h5 mb-0">
          <span>Sertifikati</span>
        </h1>
      </div>
      <div class="d-flex gap-2">
        <button class="btn btn-primary" [routerLink]="['/', 'customer', customer.id, 'certificate', 'upload']">
          Novi sertifikat
        </button>
      </div>
    </div>
    <div class="my-3"></div>
    @if (certificates.length > 0) {
      <div class="card">
        <div>
          <table class="table table-flush">
            <thead>
              <tr>
                <th>Identifikator</th>
                <th style="width: 180px;">Važi od</th>
                <th style="width: 180px;">Važi do</th>
                <th style="width: 1px;"></th>
              </tr>
            </thead>
            <tbody>
              @for (certificate of certificates; track certificate.id; let index = $index) {
                <tr>
                  <td>
                    {{  certificate.fingerprint }}
                  </td>
                  <td style="width: 180px;">
                    {{ certificate.not_valid_before }}
                  </td>
                  <td style="width: 180px;">
                    {{ certificate.not_valid_after }}
                  </td>
                  <td class="td-btn" style="width: 1px;">
                    <div class="d-flex gap-1">
                      <button type="button" class="btn btn-sm btn-light" (click)="download(index)">
                        <i class="bi bi-download"></i>
                      </button>
                      <button type="button" class="btn btn-sm btn-light" (click)="delete(index)">
                        <i class="bi bi-x-lg"></i>
                      </button>
                    </div>
                  </td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    } @else {
      <div class="card card-body">
        <div>
          Ne postoji nijedan sertifikat definisan za ovog klijenta.
        </div>
      </div>
    }
  }
</div>
