<!DOCTYPE html>
<html lang="en" ng-app="app">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="manifest" href="manifest.json">

    <script>
        if (window.location.hostname === '159.65.118.169') {
            window.location.href = window.location.href.replace('159.65.118.169', 'pos.e-lavirint.com');
        }
    </script>

    <title>Genije Pro.</title>

    <link rel="stylesheet" href="style.css?v=<%= resourceVersion %>">

    <script type="text/ng-template" id="error-messages">
        <div ng-message="required">Polje je obavezno</div>
        <div ng-message="minlength">Sadržaj polja je prekratak</div>
        <div ng-message="min">Vrijednost je manja od minimalno dozvoljene</div>
        <div ng-message="max">Vrijednost je veća od maksimalno dozvoljene</div>
        <div ng-message="parse">Vrijednost nije u odgovarajućem formatu</div>
        <div ng-message="pattern">Vrijednost nije u odgovarajućem formatu</div>
        <div ng-message="email">Polje mora biti validan imejl</div>
    </script>
</head>
<body class="bg-light" ng-controller="LoginController as ctrl">
<form name="ctrl.form" novalidate>
    <div class="mx-auto mt-3 mt-md-5" style="max-width: 360px;">
        <h4 class="mb-4">Prijava</h4>
        <div class="d-flex flex-column gap-3">
            <div>
                <label for="pib" class="form-label">PIB</label>
                <input
                    autofocus
                    type="text"
                    class="form-control"
                    name="pib"
                    id="pib"
                    ng-model="ctrl.podaci.pib"
                    pattern="\d+"
                    required
                    ng-change="ctrl.errorMessage = undefined"
                    ng-class="{'is-invalid': ctrl.form.$submitted && ctrl.form.pib.$invalid}">
                <div ng-messages="ctrl.form.pib.$error" role="alert" class="invalid-feedback">
                    <div ng-message="pattern">Polje smije sadržati samo brojeve</div>
                    <div ng-messages-include="error-messages"></div>
                </div>
            </div>
            <div>
                <label for="email" class="form-label">Korisničko ime</label>
                <input
                    type="text"
                    class="form-control"
                    name="email"
                    id="email"
                    ng-model="ctrl.podaci.email"
                    required
                    ng-change="ctrl.errorMessage = undefined"
                    ng-class="{'is-invalid': ctrl.form.$submitted && ctrl.form.email.$invalid}">
                <div ng-messages="ctrl.form.email.$error" role="alert" class="invalid-feedback">
                    <div ng-messages-include="error-messages"></div>
                </div>
            </div>
            <div>
                <label for="lozinka" class="form-label">Lozinka</label>
                <input
                    type="password"
                    class="form-control"
                    name="lozinka"
                    id="lozinka"
                    ng-model="ctrl.podaci.lozinka"
                    ng-minlength="4"
                    required
                    ng-change="ctrl.errorMessage = undefined"
                    ng-class="{'is-invalid': ctrl.form.$submitted && ctrl.form.lozinka.$invalid}">
                <div ng-messages="ctrl.form.lozinka.$error" role="alert" class="invalid-feedback">
                    <div ng-message="minlength">Polje mora imati najmanje 3 znaka.</div>
                    <div ng-messages-include="error-messages"></div>
                </div>
            </div>
            <div class="mt-3">
                <button id="prijava" class="btn btn-dark d-block w-100" ng-click="ctrl.prijava()">
                    Prijava
                </button>
            </div>
            <div>
                <div class="alert alert-danger ng-cloak" ng-if="ctrl.errorMessage">
                    {{ ctrl.errorMessage }}
                </div>
            </div>
        </div>
    </div>
</form>
</body>

<!-- build:js login.bundle.js -->
<script src="vendor/angular/angular.min.js"></script>
<script src="vendor/angular-messages/angular-messages.min.js"></script>
<script src="vendor/angular/angular.min.js"></script>
<script src="vendor/angular-messages/angular-messages.min.js"></script>
<script src="login.controller.js"></script>
<!-- endbuild -->
</html>

