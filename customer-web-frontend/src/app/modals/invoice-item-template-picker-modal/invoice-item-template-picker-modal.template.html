<div class="modal-header d-none d-md-block position-sticky top-0">
    <h4 class="mb-0">Artikli i usluge</h4>
</div>
<div class="modal-header d-md-none p-0 position-sticky top-0">
    <div class="w-100 d-flex justify-content-between">
        <div>
            <button type="button" class="btn rounded-0" data-ng-click="$close({ isConfirmed: false })">
                <i class="fa fa-arrow-left"></i> Nazad
            </button>
        </div>
        <div>
            <button type="button" class="btn btn-link text-decoration-none rounded-0" data-ng-click="ctrl.confirm()">
                Potvrdi
            </button>
        </div>
    </div>
</div>
<div class="modal-body flex-grow-0 border-bottom p-0">
    <div class="position-absolute top-0 left-0 w-100 h-100 px-3 d-flex align-items-center justify-content-end pe-none">
        <button
            class="btn btn-primary py-2 lh-1 pe-auto btn-sm"
            data-ng-click="ctrl.search()">
            <i class="fa fa-search d-md-none"></i>
            <span class="d-none d-md-block">Pretraži</span>
        </button>
    </div>
    <input
        type="text"
        class="form-control py-3 ps-3 shadow-none border-0 fs-5"
        style="padding-right: 100px;"
        autofocus
        placeholder="Pretraga..."
        ng-model="ctrl.query"
        ng-keydown="ctrl.searchOnInputEnter($event)">
</div>
<div class="modal-body bg-light overflow-y-scroll">
    <div
        class="card card-body"
        data-ng-class="{'mt-3': !$first, 'border-primary bg-primary bg-opacity-10': ctrl.selected.id === invoiceItemTemplate.id }"
        data-ng-repeat="invoiceItemTemplate in ctrl.invoiceItemTemplates"
        data-ng-click="ctrl.toggle(invoiceItemTemplate);">
        <h5>{{ invoiceItemTemplate.artikal.naziv }}</h5>
        <div>
            {{ invoiceItemTemplate.jedinicna_cijena_puna }} EUR
        </div>
        <div class="mt-3">
            <span class="badge bg-light border text-dark"
                  ng-if="invoiceItemTemplate.artikal.sifra && invoiceItemTemplate.artikal.sifra.length > 0">
                Šifra {{ invoiceItemTemplate.artikal.sifra }}
            </span>
            <span class="badge bg-light border text-dark"
                  ng-if="invoiceItemTemplate.artikal.barkod && invoiceItemTemplate.artikal.barkod.length > 0">
                Barkod {{ invoiceItemTemplate.artikal.barkod }}
            </span>
        </div>
    </div>
    <button type="button" class="btn btn-primary w-100 mt-3"
            data-ng-show="ctrl.isLoadMoreVisible"
            data-ng-click="ctrl.loadPage(ctrl.pageNumber + 1)">
        Učitaj još {{ ctrl.invoiceItemTemplates.length }} / {{ ctrl.total_items }}
    </button>
    <div class="p-5 text-center" ng-show="ctrl.isLoading">
        <div class="spinner-border spinner-lg" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <div class="scroll-buffer-medium"></div>
</div>
<div class="modal-footer d-none d-md-block position-sticky bottom-0 bg-white text-end">
    <button type="button" class="btn btn-light border" data-ng-click="$close({ isConfirmed: false })">
        Odustani
    </button>
    <button type="button" class="btn btn-primary" ng-click="ctrl.confirm()">
        Potvrdi
    </button>
</div>